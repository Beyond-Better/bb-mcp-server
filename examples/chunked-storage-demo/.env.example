# MCP Server Configuration
SERVER_NAME=chunked-storage-demo
SERVER_VERSION=1.0.0
MCP_TRANSPORT=http
HTTP_HOST=localhost
HTTP_PORT=3000

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json

# Storage Configuration
DENO_KV_PATH=./data/chunked-demo.db

# ==============================================================================
# CHUNKED TRANSPORT EVENT STORE CONFIGURATION
# ==============================================================================

# Enable chunked storage to handle large messages (recommended: true)
# Set to "false" to use original TransportEventStore (limited to 64KB messages)
TRANSPORT_USE_CHUNKED_STORAGE=true

# Maximum size per chunk in bytes (default: 61440 = 60KB)
# Should be less than Deno KV's 64KB limit, leaving room for metadata
TRANSPORT_MAX_CHUNK_SIZE=61440

# Enable compression for large messages (default: true)
# Automatically compresses messages larger than compression threshold
TRANSPORT_ENABLE_COMPRESSION=true

# Compression threshold in bytes (default: 1024 = 1KB)
# Messages smaller than this won't be compressed
TRANSPORT_COMPRESSION_THRESHOLD=1024

# Maximum total message size in bytes (default: 10485760 = 10MB)
# Messages larger than this will be rejected with an error
TRANSPORT_MAX_MESSAGE_SIZE=10485760

# ==============================================================================
# CHUNKED STORAGE MONITORING SETTINGS
# ==============================================================================

# Enable detailed logging for chunked storage operations (default: false)
TRANSPORT_CHUNKED_DEBUG_LOGGING=false

# Log compression statistics (default: true)
TRANSPORT_LOG_COMPRESSION_STATS=true

# ==============================================================================
# CHUNKED STORAGE PERFORMANCE TUNING
# ==============================================================================

# For high-throughput, small messages (< 10KB average)
# TRANSPORT_MAX_CHUNK_SIZE=51200          # 50KB chunks
# TRANSPORT_ENABLE_COMPRESSION=false       # Skip compression overhead
# TRANSPORT_MAX_MESSAGE_SIZE=1048576       # 1MB max

# For mixed message sizes with some large payloads (recommended default)
# TRANSPORT_MAX_CHUNK_SIZE=61440           # 60KB chunks
# TRANSPORT_ENABLE_COMPRESSION=true        # Enable compression
# TRANSPORT_COMPRESSION_THRESHOLD=2048     # 2KB threshold
# TRANSPORT_MAX_MESSAGE_SIZE=10485760      # 10MB max

# For large file transfers or data dumps
# TRANSPORT_MAX_CHUNK_SIZE=46080           # 45KB chunks (smaller for reliability)
# TRANSPORT_ENABLE_COMPRESSION=true        # Definitely compress
# TRANSPORT_COMPRESSION_THRESHOLD=512      # 512B threshold (low)
# TRANSPORT_MAX_MESSAGE_SIZE=52428800      # 50MB max

# ==============================================================================
# MAINTENANCE SETTINGS
# ==============================================================================

# Cleanup old events automatically (default: true)
TRANSPORT_ENABLE_AUTO_CLEANUP=true

# Number of events to keep per stream (default: 1000)
TRANSPORT_KEEP_EVENT_COUNT=1000

# Cleanup interval in milliseconds (default: 86400000 = 24 hours)
TRANSPORT_CLEANUP_INTERVAL_MS=86400000